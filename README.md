# be-w1-ladder-game

자바 웹 백엔드 1주차 사다리 게임

---
## 1단계 ([링크](https://lucas.codesquad.kr/2022-kakao/course/%EC%9B%B9%EB%B0%B1%EC%97%94%EB%93%9C/%EC%82%AC%EB%8B%A4%EB%A6%AC-%EA%B2%8C%EC%9E%84/ladder-game-step-1))
### 기능 요구사항
- 간단한 사다리 게임을 구현한다.
- n명의 사람과 m개의 사다리 개수를 입력할 수 있어야 한다.
- 사다리의 라인은 랜덤 값에 따라 있거나 없을 수도 있다.
- 사다리가 있으면 `-`를 표시하고 없으면 `" "` (공백문자)를 표시한다. 양옆에는 `|`로 세로를 표시한다.
- 사다리 상태를 화면에 출력한다. 어느 시점에 출력할 것인지에 대한 제약은 없다.
### 프로그래밍 요구사항
- 메서드의 크기가 최대 10라인을 넘지 않도록 구현한다.
- 메서드가 한 가지 일만 하도록 최대한 작게 만들자.
### 상세 구현사항
- `|`, `-`, `" "` (공백문자)를 상수로 선언하여 활용
- 인원 수 `n` 및 사다리 개수 `m`, 2차원 배열 `ladder` 멤버 변수 선언
- `Math.random`을 활용하여 라인을 그릴지에 대한 여부 결정
- 입력 및 초기화 → 사다리 완성 → 사다리 출력 순으로 구현
---
## 2단계 ([링크](https://lucas.codesquad.kr/2022-kakao/course/%EC%9B%B9%EB%B0%B1%EC%97%94%EB%93%9C/%EC%82%AC%EB%8B%A4%EB%A6%AC-%EA%B2%8C%EC%9E%84/ladder-game-step-2))
### 기능 요구사항
- 1단계와 같다.
### 프로그래밍 요구사항
- 메서드의 크기가 최대 10라인을 넘지 않도록 구현한다.
- 메서드가 한 가지 일만 하도록 최대한 작게 만들어라.
- **들여쓰기(indent) depth를 2단계에서 1단계로 줄여라**.
    - depth의 경우 if 문을 사용하는 경우 1단계의 depth가 증가한다. if 문 안에 while 문을 사용한다면 depth가 2단계가 된다.
- **else를 사용하지 마라.**
- **구현 순서를 고려하면서 프로그래밍한다.**
- **naming convention을 지키면서 프로그래밍한다.**
### 상세 구현사항
1. 1단계에서의 피드백 반영
   - 사다리 전체 모양을 2차원 배열로 저장하는 대신 실제 라인을 그릴 부분만 데이터로 리펙토링하여 저장
     - 사다리의 각 층을 Line 클래스로 표현
     - Line에서의 각 지점들을 `ArrayList<Boolean>` 형태로 저장
   - 단순히 출력하는 부분에서 `StringBuilder`를 사용한 것을 `System.out.println` 또는 `System.out.print`로 변경
     - 기존에 Ladder.java의 출력을 담당했던 메소드인 `printLadder`를 view/LadderView.java로 옮긴 후 바로 출력하도록 변경
   - 기존에 사용하던 2차원 배열 `ladder`를 Ladder라는 이름의 일급 컬랙션으로 정의
     - Ladder 클래스를 정의하여 멤버 변수를 ArrayList만 가지는 일급 컬랙션으로 활용
2. 세부 변경사항
    - 패키지를 분리하여 model에는 사다리 데이터 자체를 저장할 Ladder, Line 클래스, view에는 그려주는 기능을 담당하는 LadderView 클래스 정의
    - Line 클래스에서는 `ArrayList<Boolean>` 형태의 데이터를 통해 사다리의 한 층을 표현
      - 각각의 위치에 선을 그릴지에 대한 유무 저장
    - Ladder 클래스에서는 `ArrayList<Line>` 형태의 데이터를 통해 사다리를 표현
    - Main 클래스에는 `main` 메소드만 존재하며 인원 수 및 사다리 높이를 입력받음
    - LadderView 클래스 내에서는 `main` 메소드에서 입력받은 정보와 Ladder 클래스를 통해 사다리 생성 및 출력 담당
      - indent 문제를 해결하기 위해 출력 부분의 2중 `for`문을 메소드로 분리
---
## 3단계 ([링크](https://lucas.codesquad.kr/2022-kakao/course/%EC%9B%B9%EB%B0%B1%EC%97%94%EB%93%9C/%EC%82%AC%EB%8B%A4%EB%A6%AC-%EA%B2%8C%EC%9E%84/%EC%82%AC%EB%8B%A4%EB%A6%AC-%EA%B2%8C%EC%9E%84-3%EB%8B%A8%EA%B3%84-%EA%B5%AC%ED%98%84))
### 기능 요구사항
- 사다리 게임에 참여하는 사람에 이름을 최대5글자까지 부여할 수 있다. 사다리를 출력할 때 사람 이름도 같이 출력한다.
- 사람 이름은 쉼표(,)를 기준으로 구분한다. 
- 사람 이름을 5자 기준으로 출력하기 때문에 사다리 폭도 넓어져야 한다.
- 사다리 타기가 정상적으로 동작하려면 라인이 겹치지 않도록 해야 한다.
  - `|-----|-----|` 모양과 같이 가로 라인이 겹치는 경우 어느 방향으로 이동할지 결정할 수 없다.
### 프로그래밍 요구사항
- 메소드의 크기가 최대 10라인을 넘지 않도록 구현한다.
  - method가 한 가지 일만 하도록 최대한 작게 만들어라.
- indent(들여쓰기) depth를 2단계에서 1단계로 줄여라.
  - depth의 경우 if문을 사용하는 경우 1단계의 depth가 증가한다. if문 안에 while문을 사용한다면 depth가 2단계가 된다.
- else를 사용하지 마라.
- **배열 대신 ArrayList와 Generic을 활용해 구현한다.**
### 상세 구현사항
- 패키지를 좀 더 상세하게 분리 및 기능 추가
  - config: 설정과 관련된 내용들
    - Constants
      - 현재 사용되고 있는 상수들을 한 곳에 모아놓은 클래스
  - domain: 핵심 로직들 (입력, 조작, 유효성 검사)
    - GetInfos
      - 인원 수 및 사다리 높이를 입력받는 메소드들이 포함됨
      - 입력받을 때 요구사항에 맞게 입력됐는지 Validator 클래스를 통해 확인
    - ManipulateInfos
      - 입력된 이름 앞 뒤 공백을 없애거나 출력하기 위한 형식으로 바꿔주는 메소드들이 포함됨
      - 이름 출력 시 변환 방법
        ![image](https://user-images.githubusercontent.com/31435103/147546431-830733dc-a370-48d0-acf8-68b80ced661a.png)
    - Validator
      - 입력된 값이 올바른지, 각 라인을 그릴 수 있는지 확인해주는 메소드들이 포함됨
  - model: DTO들을 담음
    - Ladder
      - 기존 Ladder 클래스와 동일
    - Line
      - 기존 Line 클래스에 각 지점에서 라인을 그릴 때의 유효성 검사 기능 추가
  - view: 실제 UI를 담당
    - LadderView
      - 기존 LadderView 클래스애서 출력 부분만을 남김, 내용을 확인하는 부분은 Validator 클래스로 이동
      - 사다리를 입력받은 이름들과 함께 출력
- 기존 main 함수에서 입력 받는 부분을 GetInfos 클래스로 이동
---
## 3단계 추가 구현
### 피드백 반영
- 멤버 변수에 구현체 클래스 대신 인터페이스를 이용
    - `ArrayList` → `List`
- 클래스에서 getter 사용 → 외부에서 사용할 때 실행되는 로직을 클래스 안으로 이동
    - Ladder, Line과 관련된 로직을 클래스 내부로 이동
- 데이터와 뷰 분리 관점에서 뷰의 생성자에 데이터를 넘겨받는 것으로 수정
    - LadderView 생성자에 Ladder를 넘겨주도록 수정
- 메소드 명이 모호한 것들 수정
    - check가 들어간 메소드 명을 변경, 삭제
- 이름을 확인하는 메소드에서 Stream API의 noneMatch를 이용하여 가독성 증가
    - 이름 확인 방식을 완전히 변경
- null을 리턴하는 방식은 좋지 않으므로 size를 통한 유효성 검사가 더 좋을 것
    - null을 리턴하는 대신 다른 방식으로 검증하여 예외 처리를 하도록 변경
- 전체적으로 설계가 너무 과하며 불필요한 구현이 존재
    - 새롭게 리펙토링하여 좀 더 가독성 좋게 변경
### 추가 구현사항
- 기존에 데이터를 받는 기능, 데이터를 조작하는 기능 등 로직을 필요 이상으로 세분화했던 내용들을 각 클래스의 역할에 맞게 메소드를 이동
- 핵심 로직이 들어가는 domain 패키지와 UI를 그려주는 view 패키지로만 구성
- 게임을 시작하여 입력받는 클래스를 따로 두어 해당 클래스를 생성할 때 바로 게임을 시작 및 출력하도록 설계
- 입력 시 잘못된 값을 입력하면 예외를 발생하여 게임이 종료되도록 변경
- Names라는 새로운 클래스를 정의하여 입력받는 이름들을 생성자에 입력하여 출력에 알맞게 변경해주는 기능들을 넣어놓음
- getter를 사용하지 않기 위해 toString을 통해 각 클래스 별로 원하는 데이터를 출력할 수 있게 수정
- Stream API 적극 활용